/*!
 * Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
$(function(){var serverBasic="http://"+location.host+"/",option1={tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"CPU使用率",type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"CPU"}]}]},option2={tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"Heap使用率",type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"Heap"}]}]},cpuUsage=null,heapUsage=null,setSpacePrecent=function(e,t){var a=0;"old"===e&&(a=347),"eden"===e&&(a=205),"from"!==e&&"to"!==e||(a=48),$("#"+e+"-top").css("height",a*(1-t)),$("#"+e+"-foot").css("height",a*t)},freshVmMonitor=function(e){option1.series[0].data[0].value=e.CPUPrecent.toFixed(1)-0,cpuUsage.setOption(option1,!0),option2.series[0].data[0].value=e.HeapPrecent.toFixed(1)-0,heapUsage.setOption(option2,!0),$("#heap-used").text(e.HeapUsed),$("#heap-max").text(e.HeapMax),$("#non-heap-used").text(e.NonHeapUsed),$("#non-heap-max").text(e.NonHeapMax),$("#up-time").text(e.UpTime),$("#thr-count").text(e.ThreadCount),$("#thr-max-count").text(e.ThreadPeak),$("#total-thr-count").text(e.ThreadCreated),$("#class-loaded").text(e.TotalLoadedClasses),$("#gc-time").text(e.GCTime),$("#gc-runs").text(e.GCRuns),$("#old-mem").text(e.OldSpaceUsed+" / "+e.OldSpaceCap+" / "+e.OldSpaceMax),$("#eden-mem").text(e.EdenSpaceUsed+" / "+e.EdenSpaceCap+" / "+e.EdenSpaceMax),$("#sur1-mem").text(e.Sur1SpaceUsed+" / "+e.Sur1SpaceCap+" / "+e.Sur1SpaceMax),$("#sur2-mem").text(e.Sur2SpaceUsed+" / "+e.Sur2SpaceCap+" / "+e.Sur2SpaceMax);var t=e.OldSpacePrecent.toFixed(2);setSpacePrecent("old",t);var a=e.EdenSpacePrecent.toFixed(2);setSpacePrecent("eden",a);var n=e.Sur1SpacePrecent.toFixed(2);setSpacePrecent("from",n);var o=e.Sur2SpacePrecent.toFixed(2);setSpacePrecent("to",o)};setInterval(function(){$("#mon-panel").is(":visible")&&(cpuUsage||(cpuUsage=echarts.init(document.getElementById("cpuPrecent"))),heapUsage||(heapUsage=echarts.init(document.getElementById("heapPrecent"))),$.get(serverBasic+"/vm_mon_info/"+$("#vm-id").val(),function(data){$.get(serverBasic+"/vm_mon_info/"+$("#vm-id").val(),function(response){response=eval("("+response+")"),"success"==response.status?freshVmMonitor(response.data):console.log(responsea.message)})}))},1e3)});