/*!
 * Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
$(function(){var serverBasic="http://"+location.host+"/",trTemplate='<tr class="odd gradeX">\n                            <td>{{TID}}</td>\n                            <td>{{Name}}</td>\n                            <td>{{State}}</td>\n                            <td>{{CPU}}%</td>\n                            <td>{{TotalCPU}}%</td>\n                            <td>{{BlockedBy}}</td>\n                            <td><input type="button" value="view" class="btn btn-default btn-sm btn-thread-view"  data-toggle="modal" data-target="#threadModal" data-info="{{Detail}}"></td>\n                        </tr>',listCount=25,freshThreadList=function(e){$("#thread-list").html("");for(var t=0;t<e.length;t++)if(!e[t].error){for(var a=e[t].Detail,s="",n=0;n<a.length;n++)s+='<div class="th-stack-line"><i class="glyphicon glyphicon-minus"></i>  '+a[n].className+"."+a[n].methodName+" ("+a[n].fileName+" : "+a[n].lineNumber+(a[n].nativeMethod?" : native":"")+")</div>";var r=trTemplate.replace(/{{TID}}/g,e[t].TID).replace(/{{Name}}/g,e[t].Name).replace(/{{State}}/g,e[t].State).replace(/{{CPU}}/g,e[t].CPU.toFixed(2)).replace(/{{TotalCPU}}/g,e[t].TotalCPU.toFixed(2)).replace(/{{BlockedBy}}/g,e[t].BlockedBy).replace(/{{Detail}}/g,encodeURI(s));$("#thread-list").append(r)}},freshThreadCount=function(e){if(e.error)return!1;var t=e.ThreadCount;$("#thread-count").text(t)};setInterval(function(){$("#thread-panel").is(":visible")&&($.get(serverBasic+"/vm_thread_list/"+$("#vm-id").val()+"/"+listCount,function(response){response=eval("("+response+")"),"success"==response.status?freshThreadList(response.data):console.log(response.message)}),$.get(serverBasic+"/vm_thread_count/"+$("#vm-id").val(),function(response){response=eval("("+response+")"),"success"==response.status?freshThreadCount(response.data):console.log(response.message)}))},2e3),$(".thread-list-count").change(function(){listCount=$(this).val()}),$("#thread-list").on("click",".btn-thread-view",function(){$(".thread-modal-body").html(decodeURI($(this).attr("data-info")))})});