/*!
 * Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
$(function(){var serverBasic="",vmListTemplate='<li id={{id}} title="{{name}} (pid {{pid}})"><a data-vm-id="{{pid}}" class="vm-title" href="javascript:;"><img src="dist/app-icon/{{app_icon}}"> {{name}} (pid {{pid}})</a></li>',vmBasicInfoTemplate='<div>\n                                <strong>{{key}}</strong>\n                                <label style="font-weight:400">{{value}}</label>\n                            </div>',vmArgsTemplate='<div>\n                                <label style="font-weight:400">{{value}}</label>\n                            </div>',arr=new Array,freshVmList=function(e){var a=new Array;e:for(var s=0;s<e.length;s++){var r=e[s].Name,t=e[s].VmID,n=e[s].Icon,i=(r+t).replace(/\./g,""),o=vmListTemplate.replace(/{{name}}/g,r).replace(/{{pid}}/g,t).replace(/{{id}}/g,i).replace(/{{app_icon}}/g,n);a.push(i);for(var p=0;p<arr.length;p++)if(arr[p]===i)continue e;arr.push(i),$("#side-list").append(o)}for(var s=0;s<arr.length;s++)a.contains(arr[s])||($("#"+arr[s]).remove(),arr.remove(arr[s]))},loadVmList=function(){$.get(serverBasic+"vm_list",function(response){response=eval("("+response+")"),"success"==response.status?freshVmList(response.data):console.log(response.message)})};loadVmList(),setInterval(function(){loadVmList()},2e3);var freshOsInfo=function(e){var a=e.ProcesserNum,s=e.Arch,r=e.OsVersion,t=e.LoadAvg.toFixed(2);$("#ProcesserNum").text(a),$("#OsArch").text(s),$("#OsVersion").text(r),$("#LoadAvg").text(t)},loadOsInfo=function(){$.get(serverBasic+"os_info",function(response){response=eval("("+response+")"),"success"==response.status?freshOsInfo(response.data):console.log(response.message)})};loadOsInfo(),setInterval(function(){loadOsInfo()},3e3),$(".vm-list").on("click",".vm-title",function(){var vmId=$(this).attr("data-vm-id");$("#vm-id").val(vmId);var url=serverBasic+"vm_basic_info/"+vmId;$.get(url,function(response){if(response=eval("("+response+")"),"success"!=response.status)return console.log(response.message),!1;data=response.data,$(".basic-info").html("");for(var keys=["PID","User","Vendor","VmName","VmVersion"],i=0;i<keys.length;i++){var key=keys[i],value=data[key],temp=vmBasicInfoTemplate.replace(/{{key}}/g,key+": ").replace(/{{value}}/g,value);$(".basic-info").append(temp)}var systemProps=data.SystemProperties;$("#sysprops").html("");for(var key in systemProps){var value=systemProps[key],temp=vmBasicInfoTemplate.replace(/{{key}}/g,key+"=").replace(/{{value}}/g,value);$("#sysprops").append(temp)}var vmArgs=data.VmArgs;$("#vmargs").html("");for(var i=0;i<vmArgs.length;i++){var temp=vmArgsTemplate.replace(/{{value}}/g,vmArgs[i]);$("#vmargs").append(temp)}var args=data.Args;if($("#args").html(""),args instanceof Array)for(var i=0;i<args.length;i++){var temp=vmArgsTemplate.replace(/{{value}}/g,args[i]);$("#args").append(temp)}else{var temp=vmArgsTemplate.replace(/{{value}}/g,args);$("#args").append(temp)}}),$("#page-wrapper-begin").hasClass("sr-only")||$("#page-wrapper-begin").addClass("sr-only"),$("#page-wrapper").hasClass("sr-only")&&$("#page-wrapper").removeClass("sr-only")}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var a=$(e.target).text(),s=$(e.relatedTarget).text();$(".active-tab span").html(a),$(".previous-tab span").html(s)}),$(".header-tabs a").each(function(){$(this).click(function(){$(this).parent().parent().find("h5").each(function(){$(this).removeClass("active")}),$(this).parent().addClass("active");var e=$(this).attr("data-id");$(".page-panel").each(function(){$(this).removeClass("panel-active")}),$("#"+e).addClass("panel-active")})}),Array.prototype.remove=function(e){var a=-1;for(s=0;s<this.length;s++)e===this[s]&&(a=s);if(a===-1||isNaN(a)||a>this.length)return!1;for(var s=0,r=0;s<this.length;s++)this[s]!=this[a]&&(this[r++]=this[s]);this.length-=1},Array.prototype.contains=function(e){for(var a=0;a<this.length;a++)if(this[a]===e)return!0;return!1}});