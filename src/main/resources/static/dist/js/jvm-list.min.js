/*!
 * Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
$(function(){var serverBasic="/",vmListTemplate='<li id={{id}} title="{{name}} (pid {{pid}})"><a data-vm-id="{{pid}}" class="vm-title" href="javascript:;"><img src="../dist/app-icon/{{app_icon}}"> {{name}} (pid {{pid}})</a></li>',vmBasicInfoTemplate='<div>\n                                <strong>{{key}}</strong>\n                                <label style="font-weight:400">{{value}}</label>\n                            </div>',vmArgsTemplate='<div>\n                                <label style="font-weight:400">{{value}}</label>\n                            </div>',arr=new Array,freshVmList=function(a){var e=new Array;a:for(var t=0;t<a.length;t++){var r=a[t].Name,s=a[t].VmID,i=a[t].Icon,n=(r+s).replace(/\./g,""),o=vmListTemplate.replace(/{{name}}/g,r).replace(/{{pid}}/g,s).replace(/{{id}}/g,n).replace(/{{app_icon}}/g,i);e.push(n);for(var l=0;l<arr.length;l++)if(arr[l]===n)continue a;arr.push(n),$("#side-list").append(o)}for(var t=0;t<arr.length;t++)e.contains(arr[t])||($("#"+arr[t]).remove(),arr.remove(arr[t]))},loadVmList=function(){$.get(serverBasic+"/vm_list",function(data){freshVmList(eval("("+data+")"))})};loadVmList(),setInterval(function(){loadVmList()},2e3);var freshOsInfo=function(a){var e=a.ProcesserNum,t=a.Arch,r=a.OsVersion,s=a.LoadAvg.toFixed(2);$("#ProcesserNum").text(e),$("#OsArch").text(t),$("#OsVersion").text(r),$("#LoadAvg").text(s)},loadOsInfo=function(){$.get(serverBasic+"/os_info",function(data){freshOsInfo(eval("("+data+")"))})};loadOsInfo(),setInterval(function(){loadOsInfo()},3e3),$(".vm-list").on("click",".vm-title",function(){var vmId=$(this).attr("data-vm-id");$("#vm-id").val(vmId);var url=serverBasic+"/vm_basic_info/"+vmId;$.get(url,function(data){var jsonData=eval("("+data+")");if(jsonData.Error){var temp=vmBasicInfoTemplate.replace(/{{key}}/g,"Error").replace(/{{value}}/g,jsonData.Error);return void $(".basic-info").html(temp)}$(".basic-info").html("");for(var keys=["PID","User","Vendor","VmName","VmVersion"],i=0;i<keys.length;i++){var key=keys[i],value=jsonData[key],temp=vmBasicInfoTemplate.replace(/{{key}}/g,key+": ").replace(/{{value}}/g,value);$(".basic-info").append(temp)}var systemProps=jsonData.SystemProperties;$("#sysprops").html("");for(var key in systemProps){var value=systemProps[key],temp=vmBasicInfoTemplate.replace(/{{key}}/g,key+"=").replace(/{{value}}/g,value);$("#sysprops").append(temp)}var vmArgs=jsonData.VmArgs;$("#vmargs").html("");for(var i=0;i<vmArgs.length;i++){var temp=vmArgsTemplate.replace(/{{value}}/g,vmArgs[i]);$("#vmargs").append(temp)}var args=jsonData.Args;if($("#args").html(""),args instanceof Array)for(var i=0;i<args.length;i++){var temp=vmArgsTemplate.replace(/{{value}}/g,args[i]);$("#args").append(temp)}else{var temp=vmArgsTemplate.replace(/{{value}}/g,args);$("#args").append(temp)}console.log(jsonData)})}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){var e=$(a.target).text(),t=$(a.relatedTarget).text();$(".active-tab span").html(e),$(".previous-tab span").html(t)}),$(".header-tabs a").each(function(){$(this).click(function(){$(this).parent().parent().find("h5").each(function(){$(this).removeClass("active")}),$(this).parent().addClass("active");var a=$(this).attr("data-id");$(".page-panel").each(function(){$(this).removeClass("panel-active")}),$("#"+a).addClass("panel-active")})}),Array.prototype.remove=function(a){var e=-1;for(t=0;t<this.length;t++)a===this[t]&&(e=t);if(e===-1||isNaN(e)||e>this.length)return!1;for(var t=0,r=0;t<this.length;t++)this[t]!=this[e]&&(this[r++]=this[t]);this.length-=1},Array.prototype.contains=function(a){for(var e=0;e<this.length;e++)if(this[e]===a)return!0;return!1}});